# SmartContract

区块链 智能合约 公益平台

## 选题背景


公益平台或组织因为其本身的特殊性，缺少对公益项目有效的监督和管理。同时参加公益的人们有很迫切的想要通过公益项目得到公益的认证。这就是一个比较大的问题，由于用户对平台的不信任导致公益项目难以推行，由于平台组织不能有效地公布其投入公益项目数据或公布其真实的数据导致用户对平台进一步丧失信心。同时公益平台中的公益项目较多且杂，用户志愿者一般没有大量时间去筛选适合自己的公益项目。志愿者需要得到一种广泛的认可，使用区块链记录每一个志愿者的参与情况并评分。使得志愿者的志愿行为得到肯定,推动公益活动的持续高效的进行。同时利用智能合约，将公益时发放给参与活动的志愿者，志愿者参加的每一个项目都得到确认，公益时的来源也获得确认。


## 选题依据

通过智能合约部署建立一个公益平台，公益项目的发布者发布项目征集志愿者。用户根据自己的条件设定拟参与的项目类型以及特点。平台通过智能合约帮助用户挑选他参与的公益项目。并将项目的情况以及志愿者工作情况放入通过区块链中保存，供全平台用户进行监督和审查

## 使用说明

本DApp基于nodejs，使用truffle框架完成。

在demo 文件夹中

1. 首先安装nodejs环境
2. 安装truffle框架 `npm install truffle`
3. 安装ganache-cli，用于部署私链 `npm install ganache-cli`
4.  下载依赖包 `npm install` 
5. 编译智能合约 `truffle compile` 合约的编译版本为0.4.16以上
6. 运行ganache`ganache-cli`
7. 部署合约 `truffle migrate --network ganache`
8. 运行DApp `npm run deploy`
9. 打开浏览器 `localhost:8080`

## 测试

* 初始界面
初始界面分为两个部分，网页左侧为当前平台中的项目，右侧为操作台分为三部分：项目部分，志愿者部分，发布者部分。在每一个部分都有对当前对象的添加以及展示。

![初始界面](_v_images/20181229165723299_31768.png =553x)

* 添加Joiner
添加志愿者，在第二部分中 的输入框中输入姓名，点击添加按钮，添加成功会在 标题下的state中显示成功。点击showJoiner显示当前志愿者的信息。在输入框中输入志愿者姓名点击showAJoiner显示该志愿者的信息。显示志愿者在链上的地址，姓名，拥有的公益时数，已加入的项目名。

![添加Joiner](_v_images/20181229165924780_16088.png =554x)

* 添加多个Joiner

![添加多个Joiner](_v_images/20181229170852495_7755.png =537x)

* 添加发布者
添加志愿者，在第二部分中的输入框中输入姓名，以及初始的公益时总数，点击添加按钮，添加成功会在 标题下的state中显示成功。点击showPublisher显示当前发布者的信息。在输入框中输入发布者姓名点击showAPublisher显示该志愿者的信息。显示发布者在链上的地址，姓名，拥有的公益时数，已发布的项目名。

![添加发布者](_v_images/20181229170037999_16962.png =550x)

* 发布者发布项目
在showPublisher 或showAPublisher 之后就可以以显示的发布者来发布志愿项目，需要输入项目名称，项目开始时间以当前时间为标准计算差几小时，项目需要最多的志愿者数量，项目的公益时数。点击添加项目，之后就showProject，项目会显示在左侧的项目列表中，显示项目的部分地址，项目名，当前项目志愿者人数，最大志愿者人数，项目公益时，项目状态。

![发布者发布项目](_v_images/20181229170145980_17634.png =543x)

发布多个项目


![发布多个项目](_v_images/20181229170247257_23709.png =540x)

![](_v_images/20181229170735831_11789.png =531x)


不同发布者发布不同的多个项目

![不同发布者发布不同的多个项目](_v_images/20181229170514757_9223.png =554x)

![](_v_images/20181229170808098_17970.png =535x)

Joiner加入多个项目
首先showJoiner或showAJoiner获得志愿者，在左侧项目列表中选择你感兴趣的项目，点击加入项目，如果项目状态为open则会加入成功，如果不是open则加入失败。加入后点击showProject，左侧项目出现变化，显示你加入之后项目的志愿者人数


![Joiner加入多个项目](_v_images/20181229171324730_4887.png =534x)

![](_v_images/20181229171433560_24923.png =533x)

* 项目完成
在右侧项目部分，输入项目名，点击finishProject。完成项目之后会从项目发布者的总公益时中扣取公益时转给项目的志愿者。

![项目完成](_v_images/20181229171734715_17607.png =530x)

![](_v_images/20181229171802548_29509.png =537x)

![](_v_images/20181229171823920_21303.png =529x)

![](_v_images/20181229171844408_20495.png =534x)

![](_v_images/20181229171903042_9899.png =547x)

完成多个项目

![](_v_images/20181229172017035_4576.png =543x)

![](_v_images/20181229172108867_16346.png =545x)